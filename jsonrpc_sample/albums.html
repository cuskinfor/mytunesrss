<html>
<head>
<script src="prototype.js" type="text/javascript"></script>
<script src="jsonrpc.js" type="text/javascript"></script>
<script type="text/javascript">
var firstItem;
var page;
function loadAlbums() {
    mytunesrss("AlbumService.getAlbums", [null,null,null,page,firstItem,10], showJson, function() {alert("Failure")})
}
function showJson(json) {
    var html = "<table border=1>";
    var list = json.result.map.results.list;
    for (var i = 0; i < list.length; i++) {
        var map = list[i].map;
        html += "<tr><td height=48>";
        if (map.imageUrl) {
            html += "<img src='" + map.imageUrl + "/size=64' height=48 width=48 />";
        } else {
            html += "&nbsp;";
        }
        html += "</td><td valign=top>" + map.name + "</td><td valign=top>" + map.artist + "</td><td valign=top>" + map.trackCount + " tracks</td></tr>";
    }
    html += "</table>";
    document.all.albums.innerHTML = html;
    html = "";
    if (firstItem > 0) {
        html += "<a href='#' onclick='firstItem=0;loadAlbums();return false'>|&lt;</a>&nbsp;&nbsp;&nbsp;";
        html += "<a href='#' onclick='firstItem-=10;loadAlbums();return false'>&lt;</a>&nbsp;&nbsp;&nbsp;";
    }
    if (firstItem + 10 < json.result.map.totalResults) {
        var lastPageFirstItem = firstItem;
        while (lastPageFirstItem + 10 < json.result.map.totalResults) {
            lastPageFirstItem += 10;
        }
        html += "<a href='#' onclick='firstItem+=10;loadAlbums();return false'>&gt;</a>&nbsp;&nbsp;&nbsp;";
        html += "<a href='#' onclick='firstItem=" + lastPageFirstItem + ";loadAlbums();return false'>&gt;|</a>&nbsp;&nbsp;&nbsp;";
    }
    document.all.pager.innerHTML = html;
}
</script>
</head>
<body onload="firstItem=0;page=1;loadAlbums()">
<a href="#" onclick="firstItem=0;page=0;loadAlbums()">0-9</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=1;loadAlbums()">A-C</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=2;loadAlbums()">D-F</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=3;loadAlbums()">G-I</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=4;loadAlbums()">J-L</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=5;loadAlbums()">M-O</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=6;loadAlbums()">P-S</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=7;loadAlbums()">T-V</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=8;loadAlbums()">W-Z</a>&nbsp;&nbsp;&nbsp;
<a href="#" onclick="firstItem=0;page=9;loadAlbums()">all</a>&nbsp;&nbsp;&nbsp;
<div id="albums"></div>
<div id="pager"></div>
</body>
</html>
