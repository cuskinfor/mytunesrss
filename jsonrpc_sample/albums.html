<html>
<head>
<script type="text/javascript">
var firstItem;
var page;
function loadAlbums() {
    document.getElementById("albums").innerHTML = "<h1>Loading...</h1>";
    document.getElementById("pager").style.display = "none";
    top.mytunesrss("AlbumService.getAlbums", [null,null,null,page,firstItem,20], "showJson");
}
function albumPlaylist(name) {
    top.mytunesrss("AlbumService.getTracks", [top.$A([name])], "createPlaylist")
}
function createPlaylist(json) {
    top.createIphonePlaylist(document, json.result.map.results.list);
}
function showJson(json) {
    var html = "<table cellspacing='0' cellpadding='1px' width='100%'>";
    var list = json.result.map.results.list;
    for (var i = 0; i < list.length; i++) {
        var map = list[i].map;
        var col = (i % 2 == 0) ? "#CCCCCC" : "#EEEEEE";
        html += "<tr style='background-color:" + col + "'><td height='48' width='48'>";
        if (map.imageUrl) {
            html += "<img src='" + map.imageUrl + "/size=64' height=48 width=48 />";
        } else {
            html += "&nbsp;";
        }
        html += "</td><td valign='top' width='100%' onclick=\"albumPlaylist('" + map.name + "')\" style='padding-left:5px;cursor:pointer'><b>" + map.name + "</b><br />" + map.artist + "</td></tr>";
    }
    html += "</table>";
    document.all.albums.innerHTML = html;
    html = "<table border='0' cellspacing='3px' cellpadding='6px' width='100%'><tr>";
    if (firstItem > 0) {
        html += "<td width='25%' align='center' style='border:solid black 1px;background-color:#FFFFA0' onclick='firstItem=0;loadAlbums();return false'>|&lt;</td>";
        html += "<td width='25%' align='center' style='border:solid black 1px;background-color:#FFFFA0' onclick='firstItem-=10;loadAlbums();return false'>&lt;</td>";
    } else {
        html += "<td width='25%' align='center' style='border:solid white 1px;background-color:#FFFFFF'>&nbsp;</td>";
        html += "<td width='25%' align='center' style='border:solid white 1px;background-color:#FFFFFF'>&nbsp;</td>";
    }
    if (firstItem + 10 < json.result.map.totalResults) {
        var lastPageFirstItem = firstItem;
        while (lastPageFirstItem + 10 < json.result.map.totalResults) {
            lastPageFirstItem += 10;
        }
        html += "<td width='25%' align='center' style='border:solid black 1px;background-color:#FFFFA0' onclick='firstItem+=10;loadAlbums();return false'>&gt;</td>";
        html += "<td width='25%' align='center' style='border:solid black 1px;background-color:#FFFFA0' onclick='firstItem=" + lastPageFirstItem + ";loadAlbums();return false'>&gt;|</td>";
    } else {
        html += "<td width='25%' align='center' style='border:solid white 1px;background-color:#FFFFFF'>&nbsp;</td>";
        html += "<td width='25%' align='center' style='border:solid white 1px;background-color:#FFFFFF'>&nbsp;</td>";
    }
    html += "</tr></table>";
    document.all.pager.innerHTML = html;
    document.getElementById("pager").style.display = "block";
}
</script>
</head>
<body onload="firstItem=0;page=1;loadAlbums()">
<div id="pagertop" style="font-size:20px">
    <table border="0" cellspacing="3px" cellpadding="6px" width="100%">
        <tr>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=0;loadAlbums()">0-9</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=1;loadAlbums()">A-C</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=2;loadAlbums()">D-F</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=3;loadAlbums()">G-I</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=4;loadAlbums()">J-L</td>
        </tr>
        <tr>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=5;loadAlbums()">M-O</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=6;loadAlbums()">P-S</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=7;loadAlbums()">T-V</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=8;loadAlbums()">W-Z</td>
            <td width="20%" align="center" style="border:solid black 1px;background-color:#FFFFA0;color:black" onclick="firstItem=0;page=9;loadAlbums()">all</td>
        </tr>
    </table>
</div>
<div id="albums" style="font-size:24px;margin-top:10px"></div>
<div id="pager" style="font-size:32px;margin-top:10px"></div>
</body>
</html>
